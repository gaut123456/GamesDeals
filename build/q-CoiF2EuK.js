import{g as u,p,B as d,d as s,k as c,l as g,q as a,f as n,F as m,y as _}from"./q-BhEKFq9l.js";import{a as f,_ as i}from"./q-DO5ljFCo.js";var y={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};const P=async()=>{const[t,o,e]=u();try{const r=await fetch(`${y.PUBLIC_API_URL}/api/1.0/deals?storeID=${t}`);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const l=await r.json();e.deals=l.filter(v=>v.isOnSale==="1"),o(),e.isLoading=!1}catch(r){e.error=r instanceof Error?r.message:"An unknown error occurred",e.isLoading=!1}},b=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_8vZ30T6QywI:P},Symbol.toStringTag,{value:"Module"})),S=({track:t})=>{const[o,e]=u();t(()=>e.sortBy),t(()=>e.sortOrder),o()},O=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_rwE343TASA0:S},Symbol.toStringTag,{value:"Module"})),h=()=>{const[t]=u();t.deals.sort((o,e)=>{let r,l;return t.sortBy==="salePrice"||t.sortBy==="savings"?(r=Number.parseFloat(o[t.sortBy]),l=Number.parseFloat(e[t.sortBy])):(r=Number.parseInt(o[t.sortBy]),l=Number.parseInt(e[t.sortBy])),t.sortOrder==="asc"?r-l:l-r})},I=Object.freeze(Object.defineProperty({__proto__:null,_hW:_,s_62sfSrIYlik:h},Symbol.toStringTag,{value:"Module"})),D=()=>{const[t,o]=u();o.sortOrder=o.sortOrder==="asc"?"desc":"asc",t()},E=Object.freeze(Object.defineProperty({__proto__:null,s_30vazyVnVJ4:D},Symbol.toStringTag,{value:"Module"})),T=t=>{const[o,e]=u(),r=t.target;e.sortBy=r.value,o()},L=Object.freeze(Object.defineProperty({__proto__:null,s_qbiVrfgIutI:T},Symbol.toStringTag,{value:"Module"})),B=()=>{const o=f().params.id,e=p({deals:[],isLoading:!0,error:null,sortBy:"salePrice",sortOrder:"asc"}),r=a(()=>i(()=>Promise.resolve().then(()=>I),void 0),"s_62sfSrIYlik",[e]);return d(a(()=>i(()=>Promise.resolve().then(()=>O),void 0),"s_rwE343TASA0",[r,e])),d(a(()=>i(()=>Promise.resolve().then(()=>b),void 0),"s_8vZ30T6QywI",[o,r,e])),s("div",null,{class:"container"},[s("h1",null,{class:"title"},"Active Game Deals",3,null),e.isLoading?s("div",null,{class:"loading"},[s("div",null,{class:"spinner"},null,3,null),s("p",null,null,"Loading deals...",3,null)],3,"oN_0"):e.error?s("p",null,{class:"error"},["Error: ",c(l=>l.error,[e])],3,"oN_1"):g(m,{children:[s("div",null,{class:"sort-controls"},[s("select",null,{value:c(l=>l.sortBy,[e]),onChange$:a(()=>i(()=>Promise.resolve().then(()=>L),void 0),"s_qbiVrfgIutI",[r,e])},[s("option",null,{value:"salePrice"},"Price",3,null),s("option",null,{value:"savings"},"Savings",3,null),s("option",null,{value:"steamRatingPercent"},"Rating",3,null)],3,null),s("button",null,{type:"button",onClick$:a(()=>i(()=>Promise.resolve().then(()=>E),void 0),"s_30vazyVnVJ4",[r,e])},c(l=>l.sortOrder==="asc"?"↑":"↓",[e]),3,null)],3,null),s("div",null,{class:"deals-grid"},e.deals.map(l=>s("div",null,{class:"deal-card"},[s("div",null,{class:"deal-thumbnail"},s("img",{src:n(l,"thumb"),alt:`${l.title} thumbnail`},{width:"120",height:"120"},null,3,null),1,null),s("h2",null,{class:"deal-title"},n(l,"title"),1,null),s("div",null,{class:"deal-price"},[s("p",null,null,["Sale Price: $",n(l,"salePrice")],1,null),s("p",null,null,["Normal Price: ",s("span",null,{style:{textDecoration:"line-through"}},["$",n(l,"normalPrice")],1,null)],1,null),s("p",null,null,["Savings: ",Number.parseFloat(l.savings).toFixed(1),"%"],1,null)],1,null),s("p",null,{class:"deal-rating"},[n(l,"steamRatingText")," (",n(l,"steamRatingPercent"),"%)"],1,null)],1,l.dealID)),1,null)]},1,"oN_2")],1,"oN_3")};export{_ as _hW,h as a,D as b,T as c,B as d,S as s,P as s_8vZ30T6QywI};
